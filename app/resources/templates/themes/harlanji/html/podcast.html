{% extends "/html/base.html" %}
{%block subtitle %}: {{post.title}}{% endblock %}
{% block head %}
{% if post.thumbnail-url %}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@harlanji">
<meta name="twitter:creator" content="@harlanji">

<meta property="og:url" content="{{site-url}}{{uri}}">
<meta property="og:title" content="{{post.title}}">
<meta property="og:description" content="{{post.title}}.">
<meta property="og:image" content="{{site-url}}/{{post.thumbnail-url}}">
{% endif %}

{% endblock %}
{% block content %}
<div id="post">
<a href="/">Home</a>


{% if post.cover-src %}
<img src="{{ post.cover-src}}" alt="cover image">
{% endif %}

<audio id="audioplayer" preload="auto" controls style="width:100%;" >
    <source src="{{ post.audio-src }}" type="audio/mp3">
        Your browser doesn't support the HTML audio tag. You can still download the show, though!
</audio>
    <p id="audioplayer_1"></p>
<script type="text/javascript">
    var audioTag = document.createElement('audio');
    /* Do we not support MP3 audio? If not, dynamically made a Flash SWF player.  */
    if (!(!!(audioTag.canPlayType) && ("no" != audioTag.canPlayType("audio/mpeg")) && ("" != audioTag.canPlayType("audio/mpeg")))) {
        AudioPlayer.embed("audioplayer_1", {soundFile: "{{ post.audio-src }}", transparentpagebg: "yes"});
        $( '#audioplayer').hide();
    }
    else /* Ok, we do support MP3 audio, style the audio tag into a touch-friendly player */
    {
        /* If we didn't do the "if mp3 supported" check above, this call would prompt Firefox install quicktime! */
        $( '#audioplayer' ).audioPlayer(); 
    }
</script>

    {% include "/html/post-content.html" %}
    <div id="prev-next">
        {% if post.prev %}
        <a href="{{post.prev.uri}}">&laquo; {{post.prev.title}}</a>
        {% endif %}
        {% if post.next %}
        <a class="right" href="{{post.next.uri}}">{{post.next.title}} &raquo;</a>
        {% endif %}
    </div>

    {% if disqus-shortname %}
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = "{{site-url}}{{uri}}";
            this.page.identifier = "{{post.title}}";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//{{disqus-shortname}}.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    {% endif %}


</div>
{% endblock %}